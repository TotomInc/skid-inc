function cap(a){return a.charAt(0).toUpperCase()+a.slice(1)}function checkRegexGlobally(a,b){var c=new RegExp(b,"g");return-1!=a.search(c)}function filterArrayOnRegexPattern(a,b){return b.filter(function(b){return"undefined"==typeof b.pattern?!1:checkRegexGlobally(a,b.pattern)})}function msToTime(a){var a=(new Date).getTime(),b=(parseInt(a%1e3/100),parseInt(a/1e3%60)),c=parseInt(a/6e4%60),d=parseInt(a/36e5%24);return d=10>d?"0"+d:d,c=10>c?"0"+c:c,b=10>b?"0"+b:b,d+":"+c+":"+b}var beautify={prefixes:["m","b","t","q","Q","s","S","o","n","D","UD","DD","TD","qD","QD","sD","SD","OD","ND","V","UV","DV","TV","qV","QV","sV","SV","OV","NV","T","UT","DT","TT","qT","QT","sT","ST","OT","NT"],beautify:function(a,b){if(a>=1e6){var c=Math.floor(this.logFloor(a)/3),d=this.beautify(a/Math.pow(10,3*c),b);return d+""+this.prefixes[c-2]}return 0===a||"undefined"==typeof a||isNaN(a)?0:this.numberWithCommas(a.toFixed(b))},numberWithCommas:function(a){var b=a.toString().split(".");return b[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(b[1]?"."+b[1]:"")},logFloor:function(a){for(var b=0;a>=10;)b++,a/=10;return b},fix:function(a,b){return a>=1e6?beautify.beautify(a,3):1e6>a&&"number"==typeof b?beautify.beautify(a,b):1e6>a&&"number"!=typeof b?beautify.beautify(a,2):void 0},varInit:function(){window.fix=beautify.fix}};beautify.varInit(),String.prototype.cap=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var floating={addFloating:function(a,b){var c=document.createElement("div"),d=$("#"+a).width()-35,e=game.randomInclusive(0,d);$(c).addClass("floating-text").html(b).css({"margin-top":"-62px","margin-left":e+"px"}).animate({opacity:0,"margin-top":"-85px"},750,function(){$(this).remove()}),$("#"+a).append(c)}},game={randomInclusive:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},setInputTimeout:function(){$("#console-input").val(""),$("#console-input").unbind("keydown"),setTimeout(function(){$("#console-input").bind("keydown",function(a){13==a.which&&game.console.executer()}).keydown(function(a){
38==a.which&&(a.preventDefault(),game.console.typeLast())})},game.options.bindTime)},earnMoney:function(a){game.player.money+=a,game.player.totalMoney+=a},earnExp:function(a){for(game.player.exp+=a;game.player.exp>=game.player.maxExp;){var b=Math.ceil(game.randomInclusive(0,game.console.ascii.levelUp.length-1));game.player.exp-=game.player.maxExp,game.player.level++,game.player.maxExp=Math.floor(Math.pow(game.player.expInflation,game.player.level)*(100*(1.01*game.player.level))),game.console.print("levelup","You are now level "+game.player.level+"!"),game.console.print("ascii",game.console.ascii.levelUp[b])}},getGlobalMoneyMult:function(){var a=game.servers.getPersReward(),b=game.servers.getProReward().money;return a+b-1},getGlobalExpMult:function(){var a=game.servers.getProReward().exp;return a},getPlaceTime:function(a){return a.time/(1+game.servers.vm.owned*game.servers.vm.accelerator)},hackProgress:function(a){var b=1==game.player.isHacking;if(b){var c=game.console.cmds[0].places[game.player.hackingWhat],d=game.getPlaceTime(c),e=game.options.fps,f="|",g=50,h=Math.floor(game.player.hackingProgress/d*g),i=Math.ceil(g-h),j=Math.floor(game.player.hackingProgress/d*100),k=void 0,l=game.randomInclusive(c.minMoneyReward,c.maxMoneyReward),m=game.randomInclusive(c.minExpReward,c.maxExpReward),n=game.getGlobalMoneyMult(),o=game.getGlobalExpMult();if(game.player.hackingProgress+=a/e,game.player.hackingProgress<d){for(var p=0;h>p;p++)f+="#";for(var p=0;i>p;p++)f+="=";k=d-game.player.hackingProgress,f+="| ("+fix(j,2)+"%), time left: "+fix(k,2)+"s.",$("#hacking-progress").html(f)}else if(game.player.hackingProgress>=d){for(var p=0;g>p;p++)f+="#";game.player.isHacking=!1,game.player.hackingProgress=0,f+="| (100.00%)",$("#hacking-progress").html(f).removeAttr("id"),l*=n,m*=o,game.earnMoney(l),game.earnExp(m),game.player.timesPlacesHacked++,game.notif.showNotif("Skid-Inc","You have successfully hacked "+game.player.hackingWhat+", and earned $"+fix(l)+" and "+fix(m)+" exp.","app/assets/images/icons/logonotif.png"),
game.console.print("gain",cap(c.name)+" hack finished: you earned <b>$"+fix(l)+" and "+fix(m)+" exp.</b>"),game.player.hackingWhat=void 0}}else if(!b)for(var q in game.team.list)if(game.team.list[q].owned){var r=game.team.list[q],c=game.console.cmds[0].places[r.effect],d=game.getPlaceTime(c),e=game.options.fps,l=game.randomInclusive(c.minMoneyReward,c.maxMoneyReward),m=game.randomInclusive(c.minExpReward,c.maxExpReward),n=game.getGlobalMoneyMult(),o=game.getGlobalExpMult();r.progress+=a/e,r.progress>=d&&(l*=n,m*=o,game.earnMoney(l),game.earnExp(m),r.progress=0,r.done++)}},display:function(){$("#well-resources").html("Money: $"+fix(game.player.money)+"<br>Level: "+fix(game.player.level,0)+"<br>Exp: "+fix(game.player.exp)+"/"+fix(game.player.maxExp,0)+"<br><br>Money mult: x"+fix(game.getGlobalMoneyMult(),2)+"<br>Exp. mult: x"+fix(game.getGlobalExpMult(),2)+"<br>Hack time div: /"+fix(game.servers.getVMReward(),2)+"<br>Click div: /"+fix(game.servers.getClickDivider(),0)+"<br><br>Pers. servers: "+fix(game.servers.personal.owned,0)+"<br>Pro. servers: "+fix(game.servers.professional.owned,0)+"<br>VM servers: "+fix(game.servers.vm.owned,0)+"<br>QuickHack servers: "+fix(game.servers.quickhack.owned,0)),document.title="$"+fix(game.player.money)+" - SkidInc."},hackerOwned:function(a){return game.team.list[a].owned?"yes":"no"},loop:function(){game.options.now=(new Date).getTime();var a=game.options.now-game.options.before,b=Math.floor(a/game.options.interval);a>game.options.interval?game.updateGame(b):game.updateGame(1),game.options.before=(new Date).getTime()},updateGame:function(a){game.hackProgress(a),game.display()},varInit:function(a){game.options.interval=1e3/game.options.fps,game.options.intervals.loop=setInterval(game.loop,game.options.interval),game.options.intervals.achievements=setInterval(game.achievements.check,1e3),game.options.intervals.save=setInterval(game.save.save,1e3),game.achievements.varInit(),game.sounds.varInit(),game.save.varInit(),game.notif.requestPermission(),
window.onfocus=function(){game.options.gotFocus=!0},window.onblur=function(){game.options.gotFocus=!1},console.info("Var init finished.")},domInit:function(){$("#tab-container").css({"max-height":"600px","overflow-y":"auto"}),$("#navbar-version").html("v"+game.options.version),$("#navbar-mute").on("click",function(){game.sounds.switchSounds()}),$("#navbar-save").on("click",function(){game.save.save("user")}),$("#options-reset").on("click",function(){game.save.reset()}),$("#options-load").on("click",function(){game.save.load("user")}),$("#options-save").on("click",function(){game.save.save()}),$("#options-effect").on("click",function(){game.options.triggerBackground()}),$("#hack-button").on("click",function(){game.hack("sp-click")}),$("#console-enter").on("click",function(){game.console.executer()}),$("#console-input").bind("keydown",function(a){13==a.which&&game.console.executer()}).keydown(function(a){38==a.which&&(a.preventDefault(),game.console.typeLast())}),$("#console-input").bind("copy paste",function(a){a.preventDefault()}),$("#console-input").bind("cut paste",function(a){a.preventDefault()}),$("html").bind("contextmenu",function(a){a.preventDefault()}),$("img").on("dragstart",function(a){a.preventDefault()}),console.info("Dom init finished.")},init:function(){game.varInit(),game.save.load(),game.domInit(),game.options.isInit=!0}};game.options={intervals:{},interval:void 0,fps:10,bindTime:350,sounds:!1,version:.05,now:(new Date).getTime(),before:(new Date).getTime(),gotFocus:!0,effectEnabled:!1,isOpera:!1,isFirefox:!1,isSafari:!1,isIE:!1,isEdge:!1,isChrome:!1,isBlink:!1,isInit:!1,triggerBackground:function(){game.options.effectEnabled?$("#matrix-effect").fadeOut("slow",function(){game.options.effectEnabled=!1}):$("#matrix-effect").fadeIn("slow",function(){game.options.effectEnabled=!0})}},game.abilities={list:{"up-key":{name:"up-key",desc:"press your up-key to type the latest command entered.",cost:1e6,reqLevel:20,owned:!1}},buy:function(a){var b=game.abilities.list[a];
console.log(b),console.log(game.player.money>=b.cost),console.log(!b.owned),console.log(game.player.level>=b.reqLevel),game.player.money>=b.cost&&!b.owned&&game.player.level>=b.reqLevel?(game.player.money-=b.cost,b.owned=!0,game.console.print("log","You successfully bought the "+b.name+" ability.")):game.player.level<b.reqLevel?game.console.print("error","You don't have the required level to buy this ability."):game.player.money<b.price?game.console.print("error","Not enough money to buy this ability!"):b.owned&&game.console.print("error","You already own this ability.")},exec:function(a){if("sp"==a)return void game.console.print("error",game.console.errors.abilityNoArgs);if("help"==a)return void game.console.print("help",game.console.help.ability);if("list"!=a);else for(var b in game.abilities.list){var c=game.abilities.list[b];game.console.print("help","<b>"+c.name+"</b>: cost $"+fix(c.cost)+", owned: "+c.owned+". Effect: "+c.desc)}}},game.buy=function(a,b){if("sp"==a)return void game.console.print("error",game.console.errors.buyNoArgs);if("help"==a)return void game.console.print("help",game.console.help.buy);if("info"==a){var c=game.servers.getPersReward(),d=game.servers.getPersCost(),e=game.servers.getProReward(),f=game.servers.getProCost(),g=game.servers.getVMReward(),h=game.servers.getVMCost(),i=game.servers.getQuickhackCost(),j=game.servers.getClickDivider();return void game.console.print("log","<b>Servers infos</b>:<br><b>Personal servers</b>: "+fix(game.servers.personal.owned,0)+", money multiplier: x"+fix(c,2)+", next cost: $"+fix(d)+"<br><b>Professional servers</b>: "+fix(game.servers.professional.owned,0)+", money multiplier: x"+fix(e.money,2)+", experience reward: x"+fix(e.exp,2)+", next cost: $"+fix(f)+"<br><b>Virtual machines (VM) servers</b>: "+fix(game.servers.vm.owned,0)+", place hack time divider: /"+fix(g,2)+", next cost: $"+fix(h,2)+"<br><b>Quickhack servers</b>: "+fix(game.servers.quickhack.owned,0)+", click divider: /"+fix(j,0)+", next cost: $"+fix(i));
}if("serv-pers"!=a)if("serv-pro"!=a)if("serv-speedhack"!=a)if("serv-quickhack"!=a){if("server"==a)return console.log("want a "+b+" server."),void game.console.print("warn","TODO");if("server-help"==a)return void game.console.print("help",game.console.help.buyServer);if("hacker"==a)return console.log("want "+b+" hacker."),void game.console.print("warn","TODO");if("hacker-help"==a)return void game.console.print("help",game.console.help.buyHacker);if("hacker-list"!=a){if("ability"==a)return console.log("want "+b+" ability."),void game.console.print("warn","TODO");if("ability-help"==a)return void game.console.print("help",game.console.help.buyAbility);if("ability-list"!=a);else for(var k in game.abilities.list)game.console.print("help","<b>"+game.abilities.list[k].name+"</b>: cost $"+fix(game.abilities.list[k].cost)+", require level "+game.abilities.list[k].reqLevel+". Effect: "+game.abilities.list[k].desc)}else for(var l in game.team.list)game.console.print("help","<b>"+game.team.list[l].name+"</b>: cost $"+fix(game.team.list[l].price)+", manage "+game.team.list[l].effect+", owned: "+game.team.list[l].owned)}else{var m=game.servers.getQuickhackCost();if(game.player.money>=m&&game.servers.quickhack.owned<15){game.player.money-=m,game.servers.quickhack.owned++;var n=game.servers.getQuickhackCost();game.console.print("gain","You successfully bought a quickhack server for $"+fix(m)+", next cost: $"+fix(n)+". For more info type <b>buy -info</b>.")}else game.servers.quickhack.owned>=15?game.console.print("error","You already bought the maximum of speedhack servers (15)."):game.console.print("error","Not enough money to buy a quickhack server, cost $"+fix(m)+". For more info type <b>buy -info</b>.")}else{var m=game.servers.getVMCost();if(game.player.money>=m){game.player.money-=m,game.servers.vm.owned++;var n=game.servers.getVMCost();game.console.print("gain","You successfully bought a VirtualMachine for $"+fix(m)+", next cost: $"+fix(n)+". For more info type <b>buy -info</b>.");
}else game.console.print("error","Not enough money to buy a VirtualMachine, cost $"+fix(m)+". For more info type <b>buy -info</b>.")}else{var m=game.servers.getProCost();if(game.player.money>=m){game.player.money-=m,game.servers.professional.owned++;var n=game.servers.getProCost();game.console.print("gain","You successfully bought a professional server for $"+fix(m)+", next cost: $"+fix(n)+". For more info type <b>buy -info</b>.")}else game.console.print("error","Not enough money to buy a professional server, cost $"+fix(m)+". For more info type <b>buy -info</b>.")}else{var m=game.servers.getPersCost();if(game.player.money>=m){game.player.money-=m,game.servers.personal.owned++;var n=game.servers.getPersCost();game.console.print("gain","You successfully bought a personal server for $"+fix(m)+", next cost: $"+fix(n)+". For more info type <b>buy -info</b>.")}else game.console.print("error","Not enough money to buy a personal server, cost $"+fix(m)+". For more info type <b>buy -info</b>.")}},game.config=function(a,b){return"sp"==a?void game.console.print("error",game.console.errors.configNoArgs):"help"==a?void game.console.print("help",game.console.help.config):"triggerSounds"==a?void game.console.print("warn","TODO"):"triggerBackground"==a?void game.console.print("warn","TODO"):void 0},game.options.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,game.options.isFirefox="undefined"!=typeof InstallTrigger,game.options.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,game.options.isIE=!!document.documentMode,game.options.isEdge=!game.options.isIE&&!!window.StyleMedia,game.options.isChrome=!!window.chrome&&!!window.chrome.webstore,game.options.isBlink=(game.options.isChrome||game.options.isOpera)&&!!window.CSS,(game.options.isIE||game.options.isEdge)&&alert("Skid-Inc is not fully supported on Internet Explorer and Edge. We recommend you to play with Chrome or Firefox."),game.hack=function(a,b){if("mini-market"==a||"market"==a||"jewelry"==a||"bank"==a||"trading-center"==a||"anonymous-hideout"==a||"deepweb"==a){
var c=game.console.cmds.hack.places[a];return void(game.player.isHacking?game.console.print("error",game.console.errors.hackInProgress):(console.log("h"),console.log(a),console.log(game.team.list[a]),game.team.list[a].owned?game.console.print("error","You already have a hacker to hack this place."):game.player.level>=c.reqLevel?(game.player.isHacking=!0,game.player.hackingWhat=a,game.console.print("log","Hack in progress..."),game.console.print("hack-bar")):game.console.print("error",game.console.errors.levelLow)))}if("sp"==a||"sp-click"==a){var d=game.randomInclusive(game.player.randMoneyMin,game.player.randMoneyMax),e=game.randomInclusive(game.player.randExpMin,game.player.randExpMax),f=game.getGlobalMoneyMult(),g=game.getGlobalExpMult(),h=game.servers.getClickDivider();return d*=f,e*=g,"sp-click"==a?(d/=h,e/=h,game.player.timesHacked++):game.player.timesHacked+=16,game.earnMoney(d),game.earnExp(e),void("sp-click"==a?(game.console.print("gain","You successfully gained $"+fix(d)+" and "+fix(e)+" exp. (reward divided by "+fix(h,0)+" when clicking button)"),floating.addFloating("hack-button","+$"+fix(d))):game.console.print("gain","You successfully gained $"+fix(d)+" and "+fix(e)+" exp."))}if("stats"==a){var i=game.player,f=game.getGlobalMoneyMult(),g=game.getGlobalExpMult();return void game.console.print("log","<b>Hack stats</b>:<br>Basic reward <b>$"+fix(i.randMoneyMin)+" ~ $"+fix(i.randMoneyMax)+", "+fix(i.randExpMin)+" exp ~ "+fix(i.randExpMax)+" exp</b>, hack click reducer: <b>/"+i.clickReducer+"</b>, global money multiplier: x<b>"+fix(f,2)+"</b>, global exp. multiplier: x<b>"+fix(g,2)+"</b>.")}{if("list"!=a)return"help"==a?void game.console.print("help",game.console.help.hack):"place"==a?(console.log("want to hack "+b),void game.console.print("TODO")):void 0;var j=game.servers.getVMReward(),g=game.getGlobalExpMult(),f=game.getGlobalMoneyMult();for(var k in game.console.cmds[0].places){var c=game.console.cmds[0].places[k],l=c.maxExpReward*g,m=c.maxMoneyReward*f,n=c.time/j;
game.console.print("help","<b>"+c.name+"</b>: $"+fix(m)+" max, "+fix(l)+" max exp, take "+fix(n,0)+" sec, require level "+fix(c.reqLevel,0))}}},game.notif={requestPermission:function(){window.Notification&&"granted"!==Notification.permission&&Notification.requestPermission(function(a){Notification.permission!==a&&(Notification.permission=a)})},showNotif:function(a,b,c){if(window.Notification&&"granted"===Notification.permission&&!game.options.gotFocus){var d=new Notification(a,{body:b,icon:c});d.onclick=function(){window.focus(),this.close()},setTimeout(d.close(),1e4)}}},game.player={money:0,totalMoney:0,level:1,exp:0,maxExp:100,expInflation:1.15,randMoneyMax:30,randMoneyMin:15,randExpMax:25,randExpMin:10,clickReducer:16,achievementsPoints:0,timesHacked:0,timesPlacesHacked:0,isHacking:!1,hackingWhat:void 0,hackingProgress:0},game.save={key:"SK-Inc",save:function(a){localStorage.setItem(game.save.key,JSON.stringify(game.save.toSave)),"user"==a?game.console.print("save","Game successfully saved to local-storage."):console.log("Game saved.")},reset:function(){clearInterval(game.options.intervals.save),localStorage.removeItem(game.save.key),location.reload()},load:function(){if(null==localStorage.getItem(game.save.key))game.console.printGuide(),console.warn("No save found!");else{var a=JSON.parse(localStorage.getItem(game.save.key)),b=a.gp,c=a.ga,d=a.go,c=a.ga,e=a.gs,f=a.gt,g=a.gab,h=game.player,i=game.options,j=game.achievements,k=game.servers,l=game.team,m=game.abilities;i.version!==d.version&&console.warn("Loading savegame from an older version."),h.money=b.money,h.totalMoney=b.totalMoney,h.level=b.level,h.exp=b.exp,h.maxExp=b.maxExp,h.moneyMult=b.moneyMult,h.expMult=b.expMult,h.achievementsPoints=b.achievementsPoints,h.timesHacked=b.timesHacked,h.timesPlacesHacked=b.timesPlacesHacked,k.personal.owned=e.personal.owned,k.personal.mult=e.personal.mult,k.personal.level=e.personal.level,k.professional.owned=e.professional.owned,k.professional.mult=e.professional.mult,k.professional.level=e.professional.level,
k.vm.owned=e.vm.owned,k.quickhack.owned=e.quickhack.owned,j.owned=c.owned,j.printed=c.printed,i.before=d.before,i.sounds=d.sounds,i.effectEnabled=d.effectEnabled,l.list.mini_market.owned=f.list.mini_market.owned,l.list.market.owned=f.list.market.owned,l.list.jewelry.owned=f.list.jewelry.owned,l.list.bank.owned=f.list.bank.owned,l.list.trading_center.owned=f.list.trading_center.owned,l.list.anonymous_hideout.owned=f.list.anonymous_hideout.owned,l.list.deepweb.owned=f.list.deepweb.owned,l.list.mini_market.progress=f.list.mini_market.progress,l.list.market.progress=f.list.market.progress,l.list.jewelry.progress=f.list.jewelry.progress,l.list.bank.progress=f.list.bank.progress,l.list.trading_center.progress=f.list.trading_center.progress,l.list.anonymous_hideout.progress=f.list.anonymous_hideout.progress,l.list.deepweb.progress=f.list.deepweb.progress,m.list["up-key"].owned=g.list["up-key"].owned,game.achievements.checkLoaded(),console.info("Game loaded."),game.console.print("save","Save-game successfully loaded.")}},varInit:function(){game.save.toSave={gp:game.player,go:game.options,ga:game.achievements,gs:game.servers,gt:game.team,gab:game.abilities}}},game.servers={getPersCost:function(){return Math.floor(game.servers.personal.cost*Math.pow(game.servers.personal.inflation,game.servers.personal.owned))},getPersReward:function(){return 1+game.servers.personal.owned*(game.servers.personal.moneyReward-1)+(game.servers.personal.mult*game.servers.personal.owned-game.servers.personal.owned)},getProCost:function(){return Math.floor(game.servers.professional.cost*Math.pow(game.servers.professional.inflation,game.servers.professional.owned))},getProReward:function(){return{money:1+game.servers.professional.owned*(game.servers.professional.moneyReward-1)+(game.servers.professional.mult*game.servers.professional.owned-game.servers.professional.owned),exp:1+game.servers.professional.owned*(game.servers.professional.expReward-1)+(game.servers.professional.mult*game.servers.professional.owned-game.servers.professional.owned)
}},getVMCost:function(){return Math.floor(game.servers.vm.cost*Math.pow(game.servers.vm.inflation,game.servers.vm.owned))},getVMReward:function(){return 1+game.servers.vm.owned*(game.servers.vm.accelerator-1)},getQuickhackCost:function(){return Math.floor(game.servers.quickhack.cost*Math.pow(game.servers.quickhack.inflation,game.servers.quickhack.owned))},getClickDivider:function(){return Math.floor(16-game.servers.quickhack.owned)},personal:{owned:0,cost:750,inflation:1.08,moneyReward:1.08,mult:1,level:0,upInflation:10,multAdd:.05},professional:{owned:0,cost:15e4,inflation:1.08,moneyReward:1.2,expReward:1.05,mult:1,level:0,upInflation:50,multAdd:.1},vm:{owned:0,cost:5e3,inflation:1.4,accelerator:1.01},quickhack:{owned:0,cost:1e6,inflation:1e3,accelerator:1.5}},game.team={list:{mini_market:{name:"mini_market",effect:"mini-market",price:1e4,owned:!1,progress:0,done:0},market:{name:"market",effect:"market",price:75e3,owned:!1,progress:0,done:0},jewelry:{name:"jewelry",effect:"jewelry",price:6e5,owned:!1,progress:0,done:0},bank:{name:"bank",effect:"bank",price:1e6,owned:!1,progress:0,done:0},trading_center:{name:"trading_center",effect:"trading-center",price:125e5,owned:!1,progress:0,done:0},anonymous_hideout:{name:"anonymous_hideout",effect:"anonymous-hideout",price:375e5,owned:!1,progress:0,done:0},deepweb:{name:"deepweb",effect:"deepweb",price:25e7,owned:!1,progress:0,done:0}},buy:function(a){var b=game.team.list[a],c=game.console.cmds.hack.places[a];game.player.money>=b.price&&!b.owned&&game.player.level>=c.reqLevel?(game.player.money-=b.price,b.owned=!0,game.console.print("log","You successfully engaged a <b>"+b.name+"</b> working for the "+b.effect+" hack.")):game.player.level<c.reqLevel?game.console.print("error","You don't have the required level to buy this hacker."):b.owned&&game.console.print("error","You already engaged this hacker.")},exec:function(a){if("sp"==a)return void game.console.print("error",game.console.errors.hackerNoArgs);if("help"==a)return void game.console.print("help",game.console.help.hackers);
if("status"!=a);else for(var b in game.team.list){var c=game.team.list[b],d=game.console.cmds.hack.places[c.effect],e=game.getPlaceTime(d);game.console.print("log","<b>"+c.name+"</b>: hack "+c.effect+", current progress at "+fix(c.progress,2)+"/"+fix(e,2)+" sec, engaged: "+c.owned)}}},game.upgrade=function(a,b){if("sp"==a)return void game.console.print("errors",game.console.errors.upgradeNoArgs);if("help"==a)return void game.console.print("help",game.console.help.upgrade);if("info"!=a){if("server"==a)return console.log("want to upgrade a "+b+" server."),void game.console.print("warn","TODO");if("personal"!=a)if("professional"!=a);else{var c=Math.floor(1e6*Math.pow(game.servers.professional.upInflation,game.servers.professional.level));if(game.player.money>=c){game.player.money-=c,game.servers.professional.level++,game.servers.professional.mult+=game.servers.professional.multAdd;var d=Math.floor(1e5*Math.pow(game.servers.professional.upInflation,game.servers.professional.level));game.console.print("log","You successfully upgraded your professional server. Next one cost: $"+fix(d))}else game.console.print("error","Not enough money to upgrade this server.")}else{var c=Math.floor(1e4*Math.pow(game.servers.personal.upInflation,game.servers.personal.level));if(game.player.money>=c){game.player.money-=c,game.servers.personal.level++,game.servers.personal.mult+=game.servers.personal.multAdd;var d=Math.floor(1e4*Math.pow(game.servers.personal.upInflation,game.servers.personal.level));game.console.print("log","You successfully upgraded your personal server. Next one cost: $"+fix(d))}else game.console.print("error","Not enough money to upgrade this server.")}}else{var e=["personal","professional"],f=[Math.floor(1e4*Math.pow(1.15,game.servers.personal.level)),Math.floor(1e6*Math.pow(1.15,game.servers.professional.level))],g=[1+game.servers.personal.multAdd*game.servers.personal.level,1+game.servers.professional.multAdd*game.servers.professional.level];game.console.print("log","Upgrade servers infos:");
for(var h=0;h<e.length;h++)game.console.print("log","<b>"+e[h]+"</b>: current upgrade level "+game.servers[e[h]].level+", additionnal mult: x"+fix(g[h],2)+", cost $"+fix(f[h])+".")}},game.console={latest:void 0,typeLast:function(){var a=String(game.console.latest);console.log("last: "+a),console.log("typeLast called"),game.abilities.list["up-key"].owned&&(console.log("condition passed"),$("#console-input").val(a))},executer:function(){var input=$("#console-input").val(),results=filterArrayOnRegexPattern(input,game.console.cmds);if(1==results.length){var result=results[0],instances=filterArrayOnRegexPattern(input,result.commandRegex);if(1==instances.length){var instance=instances[0],option="";if(instance.options){var optionRegex=new RegExp(instance.options,"g"),matches=input.match(optionRegex);if(1==matches.length){var option=matches[0];eval(instance.exec)}else game.console.print("error","Unknown argument value.")}else eval(instance.exec)}else game.console.print("error","Unknown arguments.")}else game.console.print("error","Unknown command.");$("#console-input").val("")}},game.console.cmds=[{name:"hack",desc:"hack a place to earn money and experience.",pattern:"^hack",commandRegex:[{pattern:"^hack[\\s]*$",exec:'game.hack("sp")',options:!1},{pattern:"^hack[\\s]+-help*$",exec:'game.hack("help")',options:!1},{pattern:"^hack[\\s]+-stats*$",exec:'game.hack("stats")',options:!1},{pattern:"^hack[\\s]+-list*$",exec:'game.hack("list")',options:!1},{pattern:"^hack[\\s]+-place[\\s]+[\\w]*$",exec:'game.hack("place", option)',options:"(mini_market|market|jewelry|bank|trading_center|anonymous_hideout|deepweb)"}]},{name:"upgrade",desc:"upgrade your servers for an higher income.",pattern:"^upgrade",commandRegex:[{pattern:"^upgrade[\\s]*$",exec:'game.upgrade("sp")',options:!1},{pattern:"^upgrade[\\s]+-help*$",exec:'game.upgrade("help")',options:!1},{pattern:"^upgrade[\\s]+-info*$",exec:'game.upgrade("info")',options:!1},{pattern:"^upgrade[\\s]+[\\w]*$",exec:'game.upgrade("server", option)',
options:"(personal|professional)"}]},{name:"buy",desc:"buy servers, abilities or hire hackers to increase your hack income.",pattern:"^buy",commandRegex:[{pattern:"^buy[\\s]*$",exec:'game.buy("sp")',options:!1},{pattern:"^buy[\\s]-help*$",exec:'game.buy("help")',options:!1},{pattern:"^buy[\\s]+-info*$",exec:'game.buy("info")',options:!1},{pattern:"^buy[\\s]+-server[\\s]+-help*$",exec:'game.buy("server-help")',options:!1},{pattern:"^buy[\\s]+-server[\\s]+[\\w]*$",exec:'game.buy("server", option)',options:"(personal|professional|vm|quickhack)"},{pattern:"^buy[\\s]+-hacker[\\s]+[\\w]*$",exec:'game.buy("hacker", option)',options:"(mini_market|market|jewelry|bank|trading_center|anonymous_hideout|deepweb)"},{pattern:"^buy[\\s]+-hacker[\\s]+-help*$",exec:'game.buy("hacker-help")',options:!1},{pattern:"^buy[\\s]+-hacker[\\s]+-list*$",exec:'game.buy("hacker-list")',options:!1},{pattern:"^buy[\\s]+-ability[\\s]+-help*$",exec:'game.buy("ability-help")',options:!1},{pattern:"^buy[\\s]+-ability[\\s]+[\\w]*$",exec:'game.buy("ability", option)',options:"(key_up)"},{pattern:"^buy[\\s]+-ability[\\s]+-list*$",exec:'game.buy("ability-list")',options:!1}]},{name:"hackers",desc:"used to perform actions on your hackers.",pattern:"^hackers",commandRegex:[{pattern:"^hackers[\\s]*$",exec:'game.team.exec("sp")',options:!1},{pattern:"^hackers[\\s]+-help*$",exec:'game.team.exec("help")',options:!1},{pattern:"^hackers[\\s]+-status*$",exec:'game.team.exec("status")',options:!1}]},{name:"ability",desc:"abilities are special skills to buy to enhance your hacker power.",pattern:"^ability",commandRegex:[{pattern:"^ability[\\s]*$",exec:'game.abilities.exec("sp")',options:!1},{pattern:"^ability[\\s]+-help*$",exec:'game.abilities.exec("help")',options:!1},{pattern:"^ability[\\s]+-list*$",exec:'game.abilities.exec("list")',options:!1}]},{name:"achievements",desc:"track your progress through the game.",pattern:"^achievements",commandRegex:[{pattern:"^achievements[\\s]*$",exec:'game.achievements.exec("sp")',
options:!1},{pattern:"^achievements[\\s]+-help[\\s]*$",exec:'game.achievements.exec("help")',options:!1},{pattern:"^achievements[\\s]+-list[\\s]*$",exec:'game.achievements.exec("list")',options:!1}]},{name:"config",desc:"configure game settings.",pattern:"^config",commandRegex:[{pattern:"^config[\\s]*$",exec:'game.config("sp")',options:!1},{pattern:"^config[\\s]+-help[\\s]*$",exec:'game.config("help")',options:!1},{pattern:"^config[\\s]+-sounds[\\s]+[\\w]+[\\s]*$",exec:'game.config("triggerSounds")',options:"(true|false)"},{pattern:"^config[\\s]+-background[\\s]+[\\w]+[\\s]*$",exec:'game.config("triggerBackground", option)',options:"(true|false)"}]},{name:"clear",desc:"clear console output.",pattern:"^clear",commandRegex:[{pattern:"^clear[\\s]*$",exec:"game.console.clear()",options:!1},{pattern:"^clear[\\s]+-help[\\s]*$",exec:"game.console.clear('help')",options:!1}]},{name:"help",desc:"print a list of all the commands.",pattern:"^help",commandRegex:[{pattern:"^help[\\s]*$",exec:"game.console.printHelp()",options:!1}]},{name:"guide",desc:"learn to play this game if you are not familiar with the command line interface.",pattern:"^guide",commandRegex:[{pattern:"^guide[\\s]*$",exec:"game.console.printGuide()",options:!1}]}],game.console.ascii={levelUp:[" /$$                                     /$$         /$$   /$$ /$$$$$$$<br>| $$                                    | $$        | $$  | $$| $$__  $$<br>| $$        /$$$$$$  /$$    /$$ /$$$$$$ | $$        | $$  | $$| $$  \\ $$<br>| $$       /$$__  $$|  $$  /$$//$$__  $$| $$ /$$$$$$| $$  | $$| $$$$$$$/<br>| $$      | $$$$$$$$ \\  $$/$$/| $$$$$$$$| $$|______/| $$  | $$| $$____/<br>| $$      | $$_____/  \\  $$$/ | $$_____/| $$        | $$  | $$| $$<br>| $$$$$$$$|  $$$$$$$   \\  $/  |  $$$$$$$| $$        |  $$$$$$/| $$<br>|________/ \\_______/    \\_/    \\_______/|__/         \\______/ |__/"," _                        _          _    _          _ <br>| |                      | |        | |  | |        | |<br>| |      ___ __   __ ___ | | ______ | |  | | _ __   | |<br>| |     / _ \\\\ \\ / // _ \\| ||______|| |  | || '_ \\  | |<br>| |____|  __/ \\ V /|  __/| |        | |__| || |_) | |_|<br>|______|\\___|  \\_/  \\___||_|         \\____/ | .__/  (_)<br>                                            | |        <br>                                            |_|        ","#                                         #     #           ###<br>#       ###### #    # ###### #            #     # #####     ###<br>#       #      #    # #      #            #     # #    #    ###<br>#       #####  #    # #####  #      ##### #     # #    #     # <br>#       #      #    # #      #            #     # #####        <br>#       #       #  #  #      #            #     # #         ###<br>####### ######   ##   ###### ######        #####  #         ###<br>"]
},game.console.errors={unknownCmd:"Unknown command. Type <b>help</b> for a list of commands.",unknownArgs:"Unknown arguments. Type <b>yourCommand -help</b> for more informations.",levelLow:"Level too low. Level-up to hack this area.",hackInProgress:"You are already hacking a place. Wait for your hack to finish.",configNoArgs:"You must use <b>config</b> with arguments. Type <b>config -help</b> for more informations.",buyNoArgs:"You must use <b>buy</b> with arguments. Type <b>buy -help</b> for more informations.",buyNoArgsServ:"You must use <b>buy -server</b> with arguments. Type <b>buy -server -help</b> for more informations.",buyNoArgsHacker:"You must use <b>buy -hacker</b> with arguments. Type <b>buy -hacker -help</b> for more informations.",buyNoArgsAbility:"You must use <b>buy -ability</b> with arguments. Tpye <b>buy -ability -help</b> for more informations.",achNoArgs:"You must use <b>achievements</b> with arguments. Type <b>achievements -help</b> for more informations.",hackerNoArgs:"You must use <b>hackers</b> with arguments. Type <b>hackers -help</b> for more informations.",abilityNoArgs:"You must use <b>ability</b> with arguments. Type <b>ability -help</b> for more informations.",upgradeNoArgs:"You must use <b>upgrade</b> with arguments. Type <b>upgrade -help</b> for more informations."},game.console.help={hack:"<b>hack</b> can be used with arguments.<br><b>hack -stats</b>: stats for the simple hack.<br><b>hack -place <i>nameOfPlace</i></b>: hack a place.<br> <b>hack -place -list</b>: print a list of places with their respective informations.",config:"You must use <b>config</b> with arguments.<br><b>config -sounds <i>value</i></b>: enable (1) or disable (0) the sound of the game. (default 0)<br><b>config -background <i>value</i></b>: enable (1) or disable (0) the background animation. (defaut 0)",clear:"<b>clear</b> don't accept any arguments.",buy:"<b>buy</b> must be used with arguments.<br><b>buy -server</b>: buy a server. Get a list of server with <b>buy -server -help</b>.<br><b>buy -info</b>: print all your server status (reward, owned, next price, ...).<br><b>buy -hacker</b>: buy a hacker to automatically hack places.<br><b>buy -ability</b>: buy an ability to enhance your hacking power.",
buyServer:"<b>buy -server personal</b>: low-cost server, slightly increase money hack income.<br><b>buy -server professional</b>: better than low-cost servers, greatly increase money and experience hack income.<br><b>buy -server vm</b>: virtual machines can reduce the time when hacking a place.<br><b>buy -server quickhack</b>: a quickhack server reduce by 1 the divided reward when clicking.",buyHacker:"<b>buy -hacker <i>nameOfHacker</i></b>: buy the specified hacker.<br><b>buy -hacker -list</b>: print a list of all hackers available.",buyAbility:"<b>buy -ability <i>nameOfAbility</i></b>: buy the specified ability.<br><b>buy -ability -list</b>: print a list of all abilities available.",achievements:"<b>achievements</b> must be used with arguments.<br><b>achievements -list</b>: print a list of all achievements.",hackers:"<b>hackers</b> must be used with arguments.<br><b>hackers -status</b>: print a list of all hackers available.<br>You can buy hackers with the <b>buy</b> command. Look at <b>buy -hacker -help</b> command.",ability:"<b>ability</b> must be used with arguments.<br><b>ability -list</b>: print a list of all abilities available.<br>To buy an ability, you must use the <b>buy</b> command. Type <b>buy -ability -help</b> for more informations.",upgrade:"<b>upgrade</b> must be used with arguments.<br><b>upgrade nameOfServer</b>: upgrade the specified server.<br><b>upgrade -info</b>: print stats of current and next servers upgrades."},game.console.cmds[0].places={mini_market:{name:"mini_market",minMoneyReward:450,maxMoneyReward:1500,minExpReward:250,maxExpReward:650,time:20,reqLevel:2},market:{name:"market",minMoneyReward:2e3,maxMoneyReward:5e3,minExpReward:250,maxExpReward:600,time:40,reqLevel:10},jewelry:{name:"jewelry",minMoneyReward:1e4,maxMoneyReward:4e4,minExpReward:1500,maxExpReward:3e3,time:320,reqLevel:20},bank:{name:"bank",minMoneyReward:75e3,maxMoneyReward:2e5,minExpReward:7500,maxExpReward:15e3,time:1280,reqLevel:30},trading_center:{name:"trading_center",
minMoneyReward:75e4,maxMoneyReward:25e5,minExpReward:5e4,maxExpReward:1e5,time:5120,reqLevel:40},anonymous_hideout:{name:"anonymous_hideout",minMoneyReward:5e6,maxMoneyReward:125e5,minExpReward:25e4,maxExpReward:1e6,time:20480,reqLevel:50},deepweb:{name:"deepweb",minMoneyReward:5e7,maxMoneyReward:1e8,minExpReward:35e5,maxExpReward:95e5,time:81920,reqLevel:60}},game.console.print=function(a,b){switch(a){case"gain":$("#console-content").append('<p><span class="console-gain">[GAIN]</span> '+b+"</p>");break;case"hack":$("#console-content").append('<p><span class="console-gain">[HACK]</span> '+b+"</p>");break;case"log":$("#console-content").append('<p><span class="console-log">[LOG]</span> '+b+"</p>");break;case"save":$("#console-content").append('<p><span class="console-log">[SAVE]</span> '+b+"</p>");break;case"error":$("#console-content").append('<p><span class="console-error">[ERROR]</span> '+b+"</p>");break;case"warn":$("#console-content").append('<p><span class="console-warn">[WARN]</span> '+b+"</p>");break;case"success":$("#console-content").append('<p><span class="console-warn">[ACHIEVEMENT]</span> '+b+"</p>");break;case"levelup":$("#console-content").append('<p><span class="console-warn">[LEVEL-UP]</span> '+b+"</p>");break;case"help":$("#console-content").append('<p><span class="console-help">[HELP]</span> '+b+"</p>");break;case"guide":$("#console-content").append('<p><span class="console-help">[GUIDE]</span> '+b+"</p>");break;case"ascii":$("#console-content").append('<div class="console ascii"><pre>'+b+"</pre></div>");break;case"":$("#console-content").append("<p>"+b+"</p>");break;case"hack-bar":$("#console-content").append('<p id="hacking-progress"></p>')}$("#console-content").scrollTop(1e6)},game.console.printHelp=function(){for(var a in game.console.cmds){var b=game.console.cmds[a];game.console.print("help","<b>"+b.name+"</b>: "+b.desc)}},game.console.clear=function(a){return"undefined"==typeof a?void $("#console-content").empty():"help"==a?void game.console.print("help",game.console.help.clear):void 0;
},game.console.printGuide=function(){game.console.print("guide","Welcome to Skid-Inc, you're a poor script-kid trying to make money with your hacking skills.<br>Start making money by clicking the <b>hack</b> button or by typing <b>hack</b> command in the console.<br>Buy different servers to increase your money and experience income.<br>Hack different places to earn even more money and experience.<br>Type <b>help</b> for a list of commands, use <b>arguments</b> (like -help for example) to use all the potential of the command (like <b>hack -help</b>).<br>Try some commands: <b>buy server -help</b>, <b>hack -help</b> or even <b>config -help</b> to change game settings.<br>Good luck in your hacking adventure!")},game.sounds={button:new Audio("app/assets/sounds/button.mp3"),ambient:new Audio("app/assets/sounds/server-room.mp3"),switchSounds:function(){game.options.sounds?game.options.sounds&&(game.config("sound-off"),$("#navbar-mute").html('<i class="fa fa-volume-off" aria-hidden="true"></i> Sounds off')):(game.config("sound-on"),$("#navbar-mute").html('<i class="fa fa-volume-up" aria-hidden="true"></i> Sounds on'))},enableSounds:function(){console.log("sounds enabled"),game.options.sounds=!0,game.sounds.ambient.currentTime=0,game.options.intervals.ambientLoop=setInterval(function(){game.sounds.ambient.currentTime=0},9e4),game.options.intervals.randomSound=setInterval(game.sounds.randomSound,2e4)},disableSounds:function(){console.log("sounds disabled"),game.options.sounds=!1,game.sounds.ambient.pause(),clearInterval(game.options.intervals.ambientLoop),clearInterval(game.options.intervals.randomSound)},randomSound:function(){var a=Math.floor(100*Math.random()),b=Math.floor(100*Math.random());if(a>=25&&game.options.sounds)if(b>=50){var c=Math.ceil(Math.floor(game.randomInclusive(0,game.sounds.bip.length-1)));game.sounds.bip[c].volume=.3,game.sounds.bip[c].play()}else if(50>b){var c=Math.ceil(Math.floor(game.randomInclusive(0,game.sounds.hdd.length-1)));game.sounds.hdd[c].volume=.3,
game.sounds.hdd[c].play()}},varInit:function(){game.sounds.ambient.volume=.3,game.options.sounds&&(game.sounds.ambient.play(),game.options.intervals.ambientLoop=setInterval(function(){game.sounds.ambient.currentTime=0},9e4),game.options.intervals.randomSound=setInterval(game.sounds.randomSound,2e4)),game.sounds.bip=[new Audio("app/assets/sounds/computer-bip-1.mp3"),new Audio("app/assets/sounds/computer-bip-2.mp3"),new Audio("app/assets/sounds/computer-bip-3.mp3"),new Audio("app/assets/sounds/computer-bip-4.mp3"),new Audio("app/assets/sounds/computer-bip-5.mp3"),new Audio("app/assets/sounds/computer-bip-6.mp3")],game.sounds.hdd=[new Audio("app/assets/sounds/hard-disk-writing-1.mp3"),new Audio("app/assets/sounds/hard-disk-writing-2.mp3"),new Audio("app/assets/sounds/hard-disk-writing-3.mp3"),new Audio("app/assets/sounds/hard-disk-writing-4.mp3")]}},game.achievements={owned:new Array,list:new Array,printed:new Array,create:function(a,b,c,d,e){this.name=a,this.desc=b,this.reqName=c,this.reqNum=d,this.reward=e},check:function(){for(var i=0;i<game.achievements.list.length;i++){var thisAch=game.achievements.list[i],playerValue=eval(game.achievements.list[i].reqName);playerValue>=thisAch.reqNum&&!game.achievements.owned[i]&&(game.player.achievementsPoints+=thisAch.reward,game.achievements.owned[i]=!0,console.log(game.achievements.printed[i]),game.achievements.printed[i]||(game.achievements.printed[i]=!0,game.console.print("success","Achievement earned: <b>"+thisAch.name+"</b>, "+thisAch.desc+", +"+fix(thisAch.reward,0)+" ach. points.")))}},exec:function(a){if("sp"==a)return void game.console.print("error",game.console.errors.achNoArgs);if("help"==a)return void game.console.print("help",game.console.help.achievements);if("list"!=a);else{game.console.print("log","Achievements points: <b>"+fix(game.player.achievementsPoints,0)+"</b>");for(var b=0;b<game.achievements.list.length;b++)game.console.print("","<b>"+game.achievements.list[b].name+"</b>: "+game.achievements.list[b].desc+" Reward: +"+game.achievements.list[b].reward+" ach. points, owned: "+!!game.achievements.owned[b]+".");
}},checkLoaded:function(){if(game.achievements.owned.length!==game.achievements.list.length)for(var a=game.achievements.list.length-game.achievements.owned.length,b=0;a>b;b++)game.achievements.owned.push(!1),game.achievements.printed.push(!1)},varInit:function(){game.achievements.list=[new game.achievements.create("Script Kid I","Hack 100 times (click or via console).","game.player.timesHacked",100,10),new game.achievements.create("Script Kid II","Hack 1,000 times (click or via console).","game.player.timesHacked",1e3,25),new game.achievements.create("Script Kid III","Hack 10,000 times (click or via console).","game.player.timesHacked",1e4,50),new game.achievements.create("Script Kid IV","Hack 100,000 times (click or via console).","game.player.timesHacked",1e5,75),new game.achievements.create("Script Kid V","Hack 1,000,000 times (click or via console).","game.player.timesHacked",1e6,250),new game.achievements.create("Hacker I","Hack 10 times a place.","game.player.timesPlacesHacked",10,10),new game.achievements.create("Hacker II","Hack 1,00 times a place.","game.player.timesPlacesHacked",100,25),new game.achievements.create("Hacker III","Hack 1,000 times a place.","game.player.timesPlacesHacked",1e3,50),new game.achievements.create("Hacker IV","Hack 10,000 times a place.","game.player.timesPlacesHacked",1e4,75),new game.achievements.create("Hacker V","Hack 100,000 times a place.","game.player.timesPlacesHacked",1e5,250),new game.achievements.create("Personal servers I","Buy your first personal server.","game.servers.personal.owned",1,10),new game.achievements.create("Personal servers II","Buy 50 personal servers.","game.servers.personal.owned",50,20),new game.achievements.create("Personal servers III","Buy 250 personal servers.","game.servers.personal.owned",250,40),new game.achievements.create("Personal servers IV","Buy 1,000 personal servers.","game.servers.personal.owned",1e3,80),new game.achievements.create("Personal servers IV","Buy 25,000 personal servers.","game.servers.personal.owned",25e3,160),new game.achievements.create("Professional servers I","Buy your first professional server.","game.servers.professional.owned",1,10),new game.achievements.create("Professional servers II","Buy 50 professional servers.","game.servers.professional.owned",50,20),new game.achievements.create("Professional servers III","Buy 250 professional servers.","game.servers.professional.owned",250,40),new game.achievements.create("Professional servers IV","Buy 1,000 professional servers.","game.servers.professional.owned",1e3,80),new game.achievements.create("Professional servers IV","Buy 25,000 professional servers.","game.servers.professional.owned",25e3,160)];
for(var a=0;a<game.achievements.list.length;a++)game.achievements.owned.push(!1),game.achievements.printed.push(!1)}},function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var M={settings:{COL_WIDTH:15,COL_HEIGHT:25,VELOCITY_PARAMS:{min:4,max:8},CODE_LENGTH_PARAMS:{min:20,max:40},videoActive:!1},animation:null,c:null,ctx:null,lineC:null,ctx2:null,video:null,WIDTH:window.innerWidth,HEIGHT:window.innerHeight,COLUMNS:null,canvii:[],font:"30px matrix-code",letters:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","$","+","-","*","/","=","%",'"',"'","#","&","_","(",")",",",".",";",":","?","!","\\","|","{","}","<",">","[","]","^","~"],codes:[],createCodeLoop:null,codesCounter:0,init:function(){M.c=document.getElementById("canvas"),M.ctx=M.c.getContext("2d"),M.c.width=M.WIDTH,M.c.height=M.HEIGHT,M.ctx.shadowBlur=0,M.ctx.fillStyle="#000",M.ctx.fillRect(0,0,M.WIDTH,M.HEIGHT),M.ctx.font=M.font,M.COLUMNS=Math.ceil(M.WIDTH/M.settings.COL_WIDTH);for(var a=0;a<M.COLUMNS;a++)M.codes[a]=[],M.codes[a][0]={open:!0,position:{x:0,y:0},strength:0};M.loop(),M.createCode(),window.onresize=function(){window.cancelAnimationFrame(M.animation),M.animation=null,M.ctx.clearRect(0,0,M.WIDTH,M.HEIGHT),M.codesCounter=0,M.ctx2.clearRect(0,0,M.WIDTH,M.HEIGHT),M.WIDTH=window.innerWidth,M.HEIGHT=window.innerHeight,M.init()}},loop:function(){M.animation=requestAnimationFrame(function(){M.loop()}),M.draw()},draw:function(){var a,b,c,d,e,f;
M.settings.videoActive?(M.ctx.shadowColor="rgba(0, 0, 0, 0.5)",M.ctx.fillStyle="rgba(0, 0, 0, 0.5)",M.ctx.fillRect(0,0,M.WIDTH,M.HEIGHT),M.ctx.globalAlpha=.2,M.ctx.drawImage(M.video,0,0,M.WIDTH,M.HEIGHT),M.ctx.globalAlpha=1):(M.ctx.shadowColor="rgba(0, 0, 0, 0.5)",M.ctx.fillStyle="rgba(0, 0, 0, 0.5)",M.ctx.fillRect(0,0,M.WIDTH,M.HEIGHT)),M.ctx.globalCompositeOperation="source-over";for(var g=0;g<M.COLUMNS;g++)M.codes[g][0].canvas&&(a=M.codes[g][0].velocity,b=M.codes[g][0].canvas.height,c=M.codes[g][0].position.x,d=M.codes[g][0].position.y-b,e=M.codes[g][0].canvas,f=e.getContext("2d"),M.ctx.drawImage(e,c,d,M.settings.COL_WIDTH,b),M.codes[g][0].position.y-b<M.HEIGHT?M.codes[g][0].position.y+=a:M.codes[g][0].position.y=0)},createCode:function(){if(M.codesCounter>M.COLUMNS)return void clearTimeout(M.createCodeLoop);var a=M.randomFromInterval(0,100),b=M.assignColumn();if(b){var c=M.randomFromInterval(M.settings.CODE_LENGTH_PARAMS.min,M.settings.CODE_LENGTH_PARAMS.max),d=Math.random()*(M.settings.VELOCITY_PARAMS.max-M.settings.VELOCITY_PARAMS.min)+M.settings.VELOCITY_PARAMS.min,e=M.letters.length;M.codes[b][0].position={x:b*M.settings.COL_WIDTH,y:0},M.codes[b][0].velocity=d,M.codes[b][0].strength=M.codes[b][0].velocity/M.settings.VELOCITY_PARAMS.max;for(var f=1;c>=f;f++){var g=M.randomFromInterval(0,e-1);M.codes[b][f]=M.letters[g]}M.createCanvii(b),M.codesCounter++}M.createCodeLoop=setTimeout(M.createCode,a)},createCanvii:function(a){var b,c,d=M.codes[a].length-1,e=d*M.settings.COL_HEIGHT,f=(M.codes[a][0].velocity,M.codes[a][0].strength),g=document.createElement("canvas"),h=g.getContext("2d");g.width=M.settings.COL_WIDTH,g.height=e;for(var i=1;d>i;i++)b=M.codes[a][i],h.globalCompositeOperation="source-over",h.font="30px matrix-code",5>i?(h.shadowColor="hsl(104, 79%, 74%)",h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowBlur=10,h.fillStyle="hsla(104, 79%, "+(100-5*i)+"%, "+f+")"):i>d-4?(c=i/d,c=1-c,h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowBlur=0,h.fillStyle="hsla(104, 79%, 74%, "+(c+.3)+")"):(h.shadowOffsetX=0,
h.shadowOffsetY=0,h.shadowBlur=0,h.fillStyle="hsla(104, 79%, 74%, "+f+")"),h.fillText(b,0,e-i*M.settings.COL_HEIGHT);M.codes[a][0].canvas=g},createLines:function(a){var b=0,c=0;for(a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(0, 0, 0, 0.7)";b<M.HEIGHT;)a.moveTo(0,b),a.lineTo(M.WIDTH,b),b+=5;for(a.lineWidth=.15,a.strokeStyle="rgba(255, 255, 255, 0.7)";c<M.HEIGHT;)a.moveTo(0,c+1),a.lineTo(M.WIDTH,c+1),c+=5;a.stroke()},assignColumn:function(){var a=M.randomFromInterval(0,M.COLUMNS-1);return M.codes[a][0].open?(M.codes[a][0].open=!1,a):!1},getVideo:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL,navigator.getUserMedia({video:!0},function(a){M.video=document.createElement("video"),M.video.autoplay=!0,M.video.width=M.WIDTH,M.video.src=window.URL.createObjectURL(a),M.HEIGHT=.75*M.WIDTH,M.video.height=M.HEIGHT,M.settings.videoActive=!0},function(a){console.log(a)})},randomFromInterval:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},snapshot:function(){M.createLines(M.ctx),window.open(M.c.toDataURL())}};window.onload=function(){M.init(),game.options.effectEnabled&&$("#matrix-effect").fadeIn("slow")};